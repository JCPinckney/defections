<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Pinckney">

<title>Defections Project Codebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="defections-codebook_files/libs/clipboard/clipboard.min.js"></script>
<script src="defections-codebook_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="defections-codebook_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="defections-codebook_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="defections-codebook_files/libs/quarto-html/popper.min.js"></script>
<script src="defections-codebook_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="defections-codebook_files/libs/quarto-html/anchor.min.js"></script>
<link href="defections-codebook_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="defections-codebook_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="defections-codebook_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="defections-codebook_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="defections-codebook_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Defections Project Codebook</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button" data-quarto-source-url="collapse">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan Pinckney </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This document contains the codebook for large-n international data collection as part of the understanding defections for democracy project. The purpose of this data collection is to build a cross-national dataset measuring the loyalty of all regime support groups in all authoritarian and democratic backsliding regimes in the post-Cold War period, shifts in loyalty, and social movement, opposition, and third-party tactics that we hypothesize may affect the loyalty of regime support groups. We will use the dataset produced through this data collection effort to test a variety of hypotheses on the predictors of defection from authoritarian regimes, as well as to generate case studies for an online dashboard of defections cases.</p>
<section id="the-regime-support-group" class="level2">
<h2 class="anchored" data-anchor-id="the-regime-support-group">The Regime Support Group</h2>
<p>One major concept for our data collection is the <em>regime support group</em> (RSG). Regime support groups are social groups with two characteristics: (1) they support the current regime and (2) their support is impactful in maintaining the regime in power <span class="citation" data-cites="knutsen-throne-2025">(<a href="#ref-knutsen-throne-2025" role="doc-biblioref">Knutsen et al. 2025, 5</a>)</span>. We use the term interchangeably with the term “pillar of support”, more common in the literature on strategic nonviolent conflict, and which scholars and activists use to refer to the groups that “hold up” a political regime through providing power and resources to that regime <span class="citation" data-cites="helvey-strategic-2004 nepstad-nonviolent-2015">(<a href="#ref-helvey-strategic-2004" role="doc-biblioref">Helvey 2004</a>; <a href="#ref-nepstad-nonviolent-2015" role="doc-biblioref">Nepstad 2015</a>)</span>.</p>
<p>Previous research on RSGs/pillars has conceptualized the regime support groups in a variety of ways. <span class="citation" data-cites="helvey-strategic-2004">Helvey (<a href="#ref-helvey-strategic-2004" role="doc-biblioref">2004</a>)</span> describes nine typical pillars of support for political regimes such as police, military, and civil society organizations. <span class="citation" data-cites="pinckney-breaking-2025">Pinckney and Trilling (<a href="#ref-pinckney-breaking-2025" role="doc-biblioref">2025</a>)</span> select four of these to focus on in the context of democratic backsliding. One key insight of this literature is that the same set of RSGs are not always relevant for all regimes, though some (such as the military/security services) are almost always critical to understanding regime stability.</p>
<p>Previous scholarship has also defined and distinguished support groups in three major ways: by their institutional position (such as the bureaucracy/civil service), their economic class position (business leaders/working classes) or their social identity (ethnic group/racial group/religious group). All three of these methods of distinction are potentially relevant to a comprehensive approach to understanding loyalty and defection. For this project, we define the universe of groups whose behavior we are potentially interested in using the 14-level categorization of the <em>Regime Support and Opposition Groups</em> (ReSOG) dataset from <span class="citation" data-cites="knutsen-throne-2025">Knutsen et al. (<a href="#ref-knutsen-throne-2025" role="doc-biblioref">2025</a>)</span> (listed in <a href="#tbl-rsgs" class="quarto-xref">Table&nbsp;1</a>). This categorization combines the institutional, economic, and social definition of support groups that have been used in prior research.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(group.ids) <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Group Number"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Group"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div id="tbl-rsgs" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rsgs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Regime Support Group Categories
</figcaption>
<div aria-describedby="tbl-rsgs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Group Number</th>
<th style="text-align: left;">Group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">Aristocracy</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Landholders</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Party Elites</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Business Elites</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Bureaucracy</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Military</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">Ethnic Group</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">Religious Group</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8</td>
<td style="text-align: left;">Local Elites</td>
</tr>
<tr class="even">
<td style="text-align: left;">9</td>
<td style="text-align: left;">Urban Workers</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: left;">Urban Middle Class</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: left;">Rural Workers</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: left;">Rural Middle Class</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: left;">Foreign Govt</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The same organization or individual can be a part of multiple regime support groups, and can shift from one regime support group to another over time. For example, the regime of Bashar al-Assad in Syria clearly relied on both the military and the Alawite religious/ethnic group as part of its support coalition, and filled the higher ranks of the Syrian military with Alawites as part of their efforts to maintain the military’s lotalty.</p>
</section>
<section id="defection" class="level2">
<h2 class="anchored" data-anchor-id="defection">Defection</h2>
<p><em>Loyalty shifts</em> are any movement in the loyalty of a regime support group/pillar away from a regime and toward an opposition. <em>Defections</em> are that subset of loyalty shifts in which the individual or group was supportive of the regime prior to the shift. This means that defection is very closely related to <em>time</em>. To understand defection, you have to understand not just what the group you are examining is doing today, but what they did yesterday.</p>
<p>At the level of the individual or organization, defection can be conceptualized as a matter of <em>intensity</em>: the degree of active or passive support or opposition that the individual or organization gives to the regime. At the level of the pillar of support, defections can also be conceptualized in terms of <em>scale</em>. A defection in <em>scale</em> is one in which the number of groups or individuals within the pillar who have shifted loyalty away from the regime increases.</p>
</section>
<section id="unit-of-observation" class="level2">
<h2 class="anchored" data-anchor-id="unit-of-observation">Unit of Observation</h2>
<p>Our unit of observation is the “RSG-country-year.” For instance, “Military-Indonesia-1990” would be one observation while “Bureaucracy-Indonesia-1990” would be a separate observation. All variables in our dataset are coded at this level, and change in any variable is theoretically possible at this level, though some variables may be relatively constant over time or across groups within a country.</p>
</section>
<section id="scope-conditions" class="level2">
<h2 class="anchored" data-anchor-id="scope-conditions">Scope Conditions</h2>
<p>We will code data for all regime support groups in every authoritarian and democratic backsliding regime from 1989-2024. Theoretically, authoritarian regimes are all those political regimes that lack the minimum institutional guarantees of democracy defined by <span class="citation" data-cites="dahl-polyarchy-1973">Dahl (<a href="#ref-dahl-polyarchy-1973" role="doc-biblioref">1973</a>)</span>. We operationalize this as all regimes categorized as a “Closed Autocracy” or “Electoral Autocracy” by the “Regimes of the World” measure from V-Dem <span class="citation" data-cites="luhrmann-regimes-2018">(<a href="#ref-luhrmann-regimes-2018" role="doc-biblioref">Lührmann, Tannenberg, and Lindberg 2018</a>)</span>. Democratic backsliding regimes are all democracies experiencing “substantial de-facto decline of core institutional requirements for electoral democracy” <span class="citation" data-cites="luhrmann-third-2019">(<a href="#ref-luhrmann-third-2019" role="doc-biblioref">Lührmann and Lindberg 2019, 1096</a>)</span>. We operationalize this as all democratic regimes going through an “autocratization episode” based on the decision rules specified in <span class="citation" data-cites="luhrmann-third-2019">Lührmann and Lindberg (<a href="#ref-luhrmann-third-2019" role="doc-biblioref">2019</a>)</span>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>For example, <a href="#fig-hungary" class="quarto-xref">Figure&nbsp;1</a> shows the Electoral Democracy Index in Hungary from 1990 to 2024. Hungary is a democracy from the beginning of this period until 2010, when it enters a period of backsliding. It is backsliding until 2017, when Regimes of the World codes it as an electoral autocracy. We would collect data on the regime support groups from 2010-2024, but not for 1990-2009.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>hungary.data <span class="ot">&lt;-</span> vdem.full <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country_name,year,v2x_polyarchy) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country_name <span class="sc">==</span> <span class="st">"Hungary"</span> <span class="sc">&amp;</span> year <span class="sc">&gt;</span> <span class="dv">1989</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>regimes <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">xmin =</span> <span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2010</span>,<span class="dv">2017</span>),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xmax =</span> <span class="fu">c</span>(<span class="dv">2010</span>,<span class="dv">2017</span>,<span class="dv">2024</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Regime =</span> <span class="fu">c</span>(<span class="st">"Democracy"</span>,<span class="st">"Backsliding"</span>,<span class="st">"Authoritarian"</span>))</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> regimes,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">xmin =</span>xmin,<span class="at">xmax =</span> xmax,<span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>,<span class="at">ymax =</span> <span class="cn">Inf</span>,<span class="at">fill =</span> Regime),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.18</span>) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> hungary.data,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> year,<span class="at">y =</span> v2x_polyarchy)) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">""</span>, <span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> T)) <span class="sc">+</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>,<span class="at">y =</span> <span class="st">"Electoral Democracy Score"</span>) <span class="sc">+</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div id="fig-hungary" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hungary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="defections-codebook_files/figure-html/fig-hungary-1.png" class="img-fluid figure-img" width="1980">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hungary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Regime Type Over Time in Hungary
</figcaption>
</figure>
</div>
</div>
</div>
<p>When it comes to regime support groups, we also limit scope by whether a regime support group is <em>politically relevant</em> to the regime in question. Theoretically, this scope limitation recognizes that the same groups are not always important in all political regimes and thus considering their loyalty or their possibility for defection is not meaningful. For instance, in regimes where religion is not a significant area of political contention, the support of religious institutions is unlikely to be a major political consideration.</p>
<p>Wr consider two regime support groups to always be relevant: the military and the bureaucracy. These are relevant because they are key organs of state power. For all other regime support groups, we include them in the data if more than 50% of expert coders from V-Dem considered them to be a regime support group at any time during the regime.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
</section>
</section>
<section id="data-collection-process" class="level1">
<h1>Data Collection Process</h1>
<p>Data collection for this project will proceed in three stages. In the first stage, we will collect data on all regime support groups during periods of democratic backsliding that at any point experienced a civil resistance campaign, as recorded by the list of campaigns in the NAVCO 1.3 dataset <span class="citation" data-cites="chenoweth-list-2020">(<a href="#ref-chenoweth-list-2020" role="doc-biblioref">Chenoweth and Shay 2020</a>)</span>. When data collection for that stage is complete, we will expand to all other periods of democratic backsliding. When that stage is complete we will expand to all periods of authoritarian rule. Within these subsets, we will randomize the coding order.</p>
<p>Coding on all RSG-country-years will be done simultaneously by two human coders and one AI agent given the coding rules. Coders will code all relevant regime support groups for a regime, then review their coding and any discrepancies between their coding and the other human coder with the project’s principal investigator.</p>
<section id="sources-and-coding" class="level2">
<h2 class="anchored" data-anchor-id="sources-and-coding">Sources and Coding</h2>
<p>Coders should begin by reviewing no fewer than two scholarly sources on the regime they are coding to get an overview of the regime in question and code variables for RSGs in the first year of the regime. All RSG variable values should be carried forward from the first year until either the end of the regime in questions or until a <em>potential defection year</em> for this RSG occurs.</p>
</section>
<section id="potential-defection-years" class="level2">
<h2 class="anchored" data-anchor-id="potential-defection-years">Potential Defection Years</h2>
<p>We assume that changes in RSG loyalty are small at most points during a regime’s lifecycle. Thus, collecting detailed data on regime support groups in every year is likely to yield little data of interest and lead to significant wasted effort. To focus our efforts we rely further on the coding of regime support group loyalty by V-Dem’s country experts to identity <em>potential defection years</em>. Potential defection years are RSG-years that meet one of three conditions:</p>
<ol type="1">
<li>The percentage of expert coders that coded this RSG as supporting the regime experiences a significant drop, TK define<br>
</li>
<li>More than half of expert coders newly code this RSG as being in passive opposition to the regime.</li>
<li>Any number of expert coders code this RSG as being in active opposition to the regime.</li>
</ol>
<p><em>TK, give EG of coding across two groups</em></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Want all instances in which a regime support group is newly-indicated to be part of the opposition to the regime.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A new shift to passive opposition or a shift from passive opposition to active opposition would count</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># potential.dfx.data &lt;- reg.support.vars %&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(year &gt; 1945) %&gt;% </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   dplyr::select(country_name,year,v2regidnr,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                 contains("v2regsupgroups_"), # Get support group values</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#                 contains("v2regoppgroups_"), # Get opposition group values</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#                 contains("v2regoppgroupsact_"), # Get active opposition group values</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                 -contains("_nr")) %&gt;% # Drop alternative specification</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_longer(cols = -c(country_name,year,v2regidnr),</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#                names_to = "varname") %&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   separate(varname,into = c("variable","group"),sep = "_") %&gt;%</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(group = recode(group,!!!group.ids),</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#          variable = recode(variable, </span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#                            "v2regsupgroups" = "support",</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#                            "v2regoppgroups" = "oppose",</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#                            "v2regoppgroupsact" = "active.oppose"</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#                            )) %&gt;% </span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_wider(names_from = variable,</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#               values_from = value) %&gt;% </span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(v2regidnr,group) %&gt;%</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(support.drop = support &lt; lag(support),</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#          opp.increase = oppose &gt; lag(oppose) &amp; lag(support) &gt; 0,</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#          act.opp.increase = active.oppose &gt; lag(active.oppose) &amp; lag(support) &gt; 0,</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#          potential.dfx = if_else(support.drop == TRUE | opp.increase == TRUE | act.opp.increase == TRUE,1,0)</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   )  </span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># pillars.total &lt;- potential.dfx.data %&gt;% </span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(support &gt; 0.5)</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Also want all instances in which the number of experts scoring a group as a regime support group decline</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="variable-coding-rules" class="level1">
<h1>Variable Coding Rules</h1>
<section id="group.loyalty.unity" class="level2">
<h2 class="anchored" data-anchor-id="group.loyalty.unity">group.loyalty.unity</h2>
<p><em>Question:</em> How united is this group in its allegiance or opposition to the regime?</p>
<p><em>Clarification:</em> When thinking of this group as a whole, how much do they support or oppose the regime in power? What percentage of people in this group visibly oppose the regime? Do prominent figures in this regime speak with one voice in support of the regime, do they speak both in favor of and in opposition to the regime, or do they? Consider the level of support at the end of the year, rather than the beginning of the year.</p>
<p><em>Responses</em><br>
1. The group is completely unified in its support for the regime<br>
2. The group mostly supports the regime<br>
3. The group is roughly evenly split between support for and opposition to the regime<br>
4. The group mostly supports the opposition 5. The group is completely unified in its support for the opposition</p>
</section>
<section id="group.loyalty.intensity" class="level2">
<h2 class="anchored" data-anchor-id="group.loyalty.intensity">group.loyalty.intensity</h2>
<p><em>Question:</em> What is the highest level of opposition to the regime that you observe among this group?</p>
<p><em>Clarification:</em></p>
<p><em>Responses</em><br>
1. All members of this group actively support the regime<br>
2. At least some members of this group only passively support the regime<br>
3. At least some members of this group are neutral toward the regime<br>
4. At least some members of this group passively support the opposition<br>
5. At least some members of this group actively support the opposition</p>
</section>
<section id="opposition.tactics" class="level2">
<h2 class="anchored" data-anchor-id="opposition.tactics">opposition.tactics</h2>
<p><em>Question:</em> Did the opposition engage in any intentional attempts to spark defections from this regime support group?</p>
<p><em>Clarification:</em> In this year, did you observe any explicit or clearly implicit attempts by actors opposed to the regime in power (civil resistance campaigns, opposition politicians, civil society figures) to change the loyalty of any of the members of this regime support group to the regime in power? Were there statements condemning this support group’s cooperation with the regime? Protests directed at prominent members of the support group? Note</p>
<p><em>Responses</em><br>
1. There was no meaningful opposition to the regime in this country in this year<br>
2. There was opposition but they did not engage in any intentional tactics to spark defection<br>
3. Yes, the opposition did seek to spark defection from this regime support group</p>
</section>
<section id="opposition.tactics.list" class="level2">
<h2 class="anchored" data-anchor-id="opposition.tactics.list">opposition.tactics.list</h2>
<p><em>Question:</em> Which specific tactics by the opposition to spark defection from this regime support group did you observe in this year? Select all that apply</p>
<p><em>Responses</em><br>
1. Outreach<br>
2. Verbal Protest<br>
3. Physical Protest<br>
4. Non-cooperation<br>
5. Nonviolent Intervention</p>
<p><em>Clarification:</em> Actors opposed to the regime may attempt to spark defection in a variety of different ways, sometimes multiple ways at the same time. We have split these many ways into five categories, drawing on earlier work from <span class="citation" data-cites="sharp-politics-1973">Sharp (<a href="#ref-sharp-politics-1973" role="doc-biblioref">1973</a>)</span> and <span class="citation" data-cites="pinckney-breaking-2025">Pinckney and Trilling (<a href="#ref-pinckney-breaking-2025" role="doc-biblioref">2025</a>)</span>. These categories are not exclusive - you should pick each of them that you observe. Note that actions are relevant whether they explicitly or implicitly aim at changing RSG loyalty. So, for example, a protest where people opposed to the regime chant “the army is with the people” may not be explicitly asking for the army to no longer support the government, but they are implicitly doing so by claiming the mantle of “the people” and calling on the army to be “with” them. Note that this variable should only be coded in years where <em>opposition.tactics</em> has been coded as a 3.</p>
</section>
<section id="defection.tactics" class="level2">
<h2 class="anchored" data-anchor-id="defection.tactics">defection.tactics</h2>
<p><em>Question:</em> What specific actions did members of this support group engage in ?</p>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
</section>
</section>
<section id="informative-plots" class="level1">
<h1>Informative Plots</h1>
<section id="regime-support-groups-over-time" class="level2">
<h2 class="anchored" data-anchor-id="regime-support-groups-over-time">Regime Support Groups Over Time</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># support.groups &lt;- list(v2regsupgroups_0 = "Aristocracy",</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_1 = "Landholders",</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_2 = "Party Elites",</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_3 = "Business Elites",</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_4 = "Bureaucracy",</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_5 = "Military",</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_6 = "Ethnic Group",</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_7 = "Religious Group",</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_8 = "Local Elites",</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_9 = "Urban Workers",</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_10 = "Urban Middle Class",</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_11 = "Rural Workers",</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_12 = "Rural Middle Class",</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#                        v2regsupgroups_13 = "Foreign Govt")</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># line.plot &lt;- vdem.full %&gt;% </span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(year) %&gt;% </span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarize(across(contains("v2regsupgroups_"),~ sum(.,na.rm = T))) %&gt;% </span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(-v2regsupgroups_nr) %&gt;% </span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_longer(cols = contains("v2regsupgroups_"),</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#                names_to = "support.group") %&gt;% </span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(support.group = recode(support.group, !!!support.groups)) %&gt;% </span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x = year,y = value,color = support.group,group = support.group)) +</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_line(linewidth = 1.5)</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplotly(line.plot)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="references" class="level1 unnumbered">


</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-chenoweth-list-2020" class="csl-entry" role="listitem">
Chenoweth, Erica, and Christopher Wiley Shay. 2020. <span>“List of <span>Campaigns</span> in <span>NAVCO</span> 1.3.”</span> Harvard Dataverse.
</div>
<div id="ref-dahl-polyarchy-1973" class="csl-entry" role="listitem">
Dahl, Robert Alan. 1973. <em>Polyarchy: <span>Participation</span> and Opposition</em>. New Haven, CT: Yale University Press.
</div>
<div id="ref-helvey-strategic-2004" class="csl-entry" role="listitem">
Helvey, Robert L. 2004. <em>On Strategic Nonviolent Conflict: <span>Thinking</span> about the Fundamentals</em>. Albert Einstein Institute.
</div>
<div id="ref-knutsen-throne-2025" class="csl-entry" role="listitem">
Knutsen, Carl Henrik, Sirianne Dahlum, Magnus B. Rasmussen, and Tore Wig. 2025. <span>“Behind the <span>Throne</span>: <span>Regime</span> Support Coalitions Around the World, 1789-2020.”</span> <em>British Journal of Political Science</em> 55: e37.
</div>
<div id="ref-luhrmann-third-2019" class="csl-entry" role="listitem">
Lührmann, Anna, and Staffan I. Lindberg. 2019. <span>“A Third Wave of Autocratization Is Here: What Is New about It?”</span> <em>Democratization</em> 26 (7): 1095–1113.
</div>
<div id="ref-luhrmann-regimes-2018" class="csl-entry" role="listitem">
Lührmann, Anna, Marcus Tannenberg, and Staffan I. Lindberg. 2018. <span>“Regimes of the World (<span>RoW</span>): <span>Opening</span> New Avenues for the Comparative Study of Political Regimes.”</span> <em>Politics and Governance</em> 6 (1): 60–77.
</div>
<div id="ref-nepstad-nonviolent-2015" class="csl-entry" role="listitem">
Nepstad, Sharon Erickson. 2015. <em>Nonviolent <span>Struggle</span>: <span>Theories</span>, <span>Strategies</span>, and <span>Dynamics</span></em>. New York, NY: Oxford University Press.
</div>
<div id="ref-pinckney-breaking-2025" class="csl-entry" role="listitem">
Pinckney, Jonathan, and Claire Trilling. 2025. <span>“Breaking <span>Down Pillars</span> of <span>Support</span> for <span>Democratic Backsliding</span>.”</span> <em>Mobilization: An International Quarterly</em> 30 (2): 171–88.
</div>
<div id="ref-sharp-politics-1973" class="csl-entry" role="listitem">
Sharp, Gene. 1973. <em>The <span>Politics</span> of <span>Nonviolent Action</span></em>. Boston, MA: Porter Sargent.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Specifically, an autocratization episode is a decline of 0.1 on the Electoral Democracy index from V-Dem. Potential episodes begin in any year where a decline of 0.01 or more occurs, and continue as long as there is continued decline, allowing for up to four years of temporary stagnation. Potential episodes end when there is no decline of 0.01 or more over four years, or if there is an increase of 0.02 or more. Potential episodes are only included as manifest episodes if the total decline over the episode adds up to 0.1 or more <span class="citation" data-cites="luhrmann-third-2019">(<a href="#ref-luhrmann-third-2019" role="doc-biblioref">Lührmann and Lindberg 2019, 1101</a>)</span><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Technically speaking, if the regime-specific maximum of the <em>v2regsupgroups</em> variable for that support group is greater than 0.5.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>